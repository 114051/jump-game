<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>è¬å£‘æ¾é¢¨ - æå”å¤§å¯Œç¿</title>
    <style>
        :root {
            --bg-color: #f4e4bc; /* ä»¿å¤ç´™è‰² */
            --board-border: #5c4033;
            --cell-bg: #e6d0a0;
            --p1-color: #d93a3a; /* æœ±ç ‚ç´… */
            --p2-color: #2c5697; /* çŸ³é’è‰² */
        }

        body {
            font-family: "Microsoft JhengHei", "KaiTi", serif;
            background-color: #222;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        h1 {
            color: #f4e4bc;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px #000;
        }

        /* éŠæˆ²æ£‹ç›¤ä½ˆå±€ */
        .board {
            display: grid;
            grid-template-columns: repeat(6, 120px);
            grid-template-rows: repeat(6, 120px);
            gap: 5px;
            background-color: var(--board-border);
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
        }

        /* ä¸­å¿ƒåœ–ç‰‡å€åŸŸ */
        .center-image {
            grid-column: 2 / span 4;
            grid-row: 2 / span 4;
            background-color: #111;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #8b6914;
        }

        .center-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.9;
        }

        /* æ ¼å­æ¨£å¼ */
        .cell {
            background-color: var(--cell-bg);
            border: 1px solid #8b7d6b;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
            text-align: center;
            font-size: 12px;
            position: relative;
        }

        .cell-title {
            font-weight: bold;
            margin-top: 5px;
        }

        .cell-price {
            font-size: 10px;
            color: #555;
        }

        /* ç‰¹æ®Šæ ¼é¡è‰² */
        .corner { background-color: #d4b483; }
        .chance { background-color: #c7d2d6; }
        .event { background-color: #d6c7c7; }

        /* ç©å®¶æ£‹å­ */
        .player-token {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
            bottom: 5px;
            border: 2px solid white;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }
        
        .p1-token { background-color: var(--p1-color); left: 10px; }
        .p2-token { background-color: var(--p2-color); right: 10px; }

        /* æ“æœ‰è€…æ¨™è¨˜ */
        .owner-mark {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        /* æ§åˆ¶é¢æ¿ */
        .controls {
            margin-top: 20px;
            background-color: var(--bg-color);
            padding: 20px;
            border-radius: 8px;
            width: 720px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-box {
            width: 45%;
        }

        .player-info {
            padding: 5px;
            margin: 5px 0;
            border-radius: 4px;
        }

        .p1-info { border-left: 5px solid var(--p1-color); background: rgba(217, 58, 58, 0.1); }
        .p2-info { border-left: 5px solid var(--p2-color); background: rgba(44, 86, 151, 0.1); }

        button {
            background-color: #8b4513;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
            font-family: "KaiTi", serif;
        }

        button:hover { background-color: #a0522d; }
        button:disabled { background-color: #ccc; cursor: not-allowed; }

        #log {
            width: 100%;
            height: 100px;
            overflow-y: scroll;
            background: #fff;
            border: 1px solid #ccc;
            margin-top: 10px;
            padding: 5px;
            font-size: 13px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border: 3px solid #5c4033;
            z-index: 100;
            text-align: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
        }
    </style>
</head>
<body>

    <h1>è¬å£‘æ¾é¢¨ãƒ»ç•«é™¢çˆ­éœ¸</h1>

    <div class="board" id="gameBoard">
        <!-- ä¸­å¿ƒåœ–ç‰‡ (æå”ä½œå“) -->
        <div class="center-image">
            <img src="https://digitalarchive.npm.gov.tw/html/att/00/00/09/27/0000092708/17006830_500.jpg" alt="æå”-è¬å£‘æ¾é¢¨åœ–">
        </div>
        
        <!-- JS å°‡ç”Ÿæˆæ ¼å­ -->
    </div>

    <div class="controls">
        <div class="status-box">
            <div class="player-info p1-info">
                <strong>ç©å®¶ä¸€ (æœ±ç ‚)</strong><br>
                éˆæ„Ÿ: <span id="p1-money">1000</span> | ä½ç½®: <span id="p1-pos">èµ·é»</span>
            </div>
            <div class="player-info p2-info">
                <strong>ç©å®¶äºŒ (çŸ³é’)</strong><br>
                éˆæ„Ÿ: <span id="p2-money">1000</span> | ä½ç½®: <span id="p2-pos">èµ·é»</span>
            </div>
        </div>
        
        <div style="text-align: center;">
            <div id="dice-display" style="font-size: 24px; margin-bottom: 10px;">ğŸ² æº–å‚™é–‹å§‹</div>
            <button id="rollBtn" onclick="playTurn()">æ“²éª°å­</button>
        </div>
    </div>

    <div id="log">æ­¡è¿ä¾†åˆ°å®‹ä»£ç•«é™¢ï¼éŠæˆ²é–‹å§‹ï¼Œç©å®¶ä¸€å…ˆæ”»ã€‚</div>

    <div id="messageModal" class="modal">
        <h3 id="modalTitle">æ¨™é¡Œ</h3>
        <p id="modalMsg">å…§å®¹</p>
        <button onclick="closeModal()">ç¢ºå®š</button>
    </div>

<script>
    // éŠæˆ²æ•¸æ“šé…ç½® (åŸºæ–¼æå”ç”Ÿå¹³èˆ‡ç•«ä½œ)
    const cellsData = [
        { name: "èµ·é»(æ²³é™½)", type: "start", price: 0, rent: 0, desc: "é ˜å–ç›¤çº" }, // 0
        { name: "å¢¨éŸ»å ‚", type: "prop", price: 60, rent: 10, desc: "åŸºç¤ç•«å…·åº—" }, // 1
        { name: "å®£å’Œç•«é™¢", type: "chance", price: 0, rent: 0, desc: "å¾½å®—è³è­˜ï¼Ÿ" }, // 2
        { name: "é’ç¶ æŸ“åŠ", type: "prop", price: 100, rent: 20, desc: "çŸ³é’çŸ³ç¶ é¡æ–™" }, // 3
        { name: "æ·±å±±æ¾æ—", type: "prop", price: 120, rent: 25, desc: "å¯«ç”Ÿéˆæ„Ÿåœ°" }, // 4
        { name: "é–åº·ä¹‹é›£", type: "event", price: 0, rent: 0, desc: "æš«åœæˆ–ç½°æ¬¾" }, // 5
        { name: "æ–§åŠˆçš´æ³•", type: "prop", price: 150, rent: 35, desc: "ç¨é–€ç­†æ³•" }, // 6
        { name: "æ·±å±±å¤å¯º", type: "parking", price: 0, rent: 0, desc: "éœå¿ƒä¿®é¤Š" }, // 7
        { name: "ç´¹èˆˆç•«é™¢", type: "prop", price: 180, rent: 45, desc: "å—å®‹ç•«é™¢å¾…è©”" }, // 8
        { name: "å¾¡è³œé‡‘å¸¶", type: "prop", price: 220, rent: 55, desc: "æœ€é«˜æ¦®è­½" }, // 9
        { name: "å°‹æ‰¾éš±æ¬¾", type: "chance", price: 0, rent: 0, desc: "ç™¼ç¾1124å¹´æ¬¾" }, // 10
        { name: "è¬å£‘æµæ³‰", type: "prop", price: 250, rent: 65, desc: "ç•«ä¸­çµ•æ™¯" }, // 11
        { name: "ä¸»å³°(å£¯ç¢©)", type: "prop", price: 280, rent: 75, desc: "æ°£å‹¢æ’¼å‹•" }, // 12
        { name: "è¿‘æ™¯æ¾æ—", type: "prop", price: 300, rent: 85, desc: "ç©ºé–“æ·±é " }, // 13
        { name: "æ¯æ€å´–", type: "jail", price: 0, rent: 0, desc: "éˆæ„Ÿæ¯ç«­" }, // 14
        { name: "å¾©å¤ç•«é¢¨", type: "prop", price: 200, rent: 50, desc: "è¿½æ‘¹èŒƒå¯¬" }, // 15
        { name: "è•­å¯ºåœ–", type: "prop", price: 180, rent: 40, desc: "æå”æ—©æœŸä½œå“" }, // 16
        { name: "æ¡è–‡åœ–", type: "prop", price: 160, rent: 35, desc: "å—å®‹äººç‰©ç•«" }, // 17
        { name: "æ¸¡æ±Ÿ", type: "event", price: 0, rent: 0, desc: "å¾åŒ—è‡³å—" }, // 18
        { name: "è§€ç€‘", type: "prop", price: 140, rent: 30, desc: "è½æ³‰è§€ç€‘" } // 19
    ];

    // æ˜ å°„ç´¢å¼•åˆ° 6x6 ç¶²æ ¼çš„åº§æ¨™ (é †æ™‚é‡ç¹è¡Œ)
    // 0(1,1) -> 1(1,2) -> 2(1,3) -> 3(1,4) -> 4(1,5) -> 5(1,6)
    // 19(2,1)                                            6(2,6)
    // 18(3,1)         (ä¸­å¿ƒåœ–ç‰‡ä½”æ“š 2-5è¡Œ, 2-5åˆ—)        7(3,6)
    // 17(4,1)                                            8(4,6)
    // 16(5,1)                                            9(5,6)
    // 15(6,1) -> 14(6,2) -> 13(6,3) -> 12(6,4) -> 11(6,5) -> 10(6,6)
    
    // ä¿®æ­£çš„æ ¼ä½æ˜ å°„ (Grid Row/Col)
    const cellPositions = [
        {r:1, c:1}, {r:1, c:2}, {r:1, c:3}, {r:1, c:4}, {r:1, c:5}, {r:1, c:6},
        {r:2, c:6}, {r:3, c:6}, {r:4, c:6}, {r:5, c:6},
        {r:6, c:6}, {r:6, c:5}, {r:6, c:4}, {r:6, c:3}, {r:6, c:2}, {r:6, c:1},
        {r:5, c:1}, {r:4, c:1}, {r:3, c:1}, {r:2, c:1}
    ];

    let players = [
        { id: 1, name: "ç©å®¶ä¸€", color: "#d93a3a", money: 1000, pos: 0, jail: 0, active: true },
        { id: 2, name: "ç©å®¶äºŒ", color: "#2c5697", money: 1000, pos: 0, jail: 0, active: true }
    ];
    let currentPlayerIdx = 0;
    let ownership = new Array(20).fill(0); // 0=ç„¡, 1=P1, 2=P2

    function initBoard() {
        const board = document.getElementById('gameBoard');
        cellsData.forEach((data, index) => {
            const cell = document.createElement('div');
            cell.className = 'cell';
            const pos = cellPositions[index];
            cell.style.gridRow = pos.r;
            cell.style.gridColumn = pos.c;
            
            // æ ¹æ“šé¡å‹åŠ é¡è‰²
            if (data.type === 'start' || data.type === 'jail' || data.type === 'parking') cell.classList.add('corner');
            if (data.type === 'chance') cell.classList.add('chance');
            if (data.type === 'event') cell.classList.add('event');

            let content = `<div class="cell-title">${data.name}</div>`;
            if (data.type === 'prop') {
                content += `<div class="cell-price">ğŸ’°${data.price}</div>`;
            } else {
                content += `<div class="cell-price" style="font-size:9px">${data.desc}</div>`;
            }
            // æ“æœ‰è€…æ¨™è¨˜
            content += `<div id="owner-${index}" class="owner-mark"></div>`;
            
            cell.innerHTML = content;
            board.appendChild(cell);
        });
        updateTokens();
    }

    function updateTokens() {
        // æ¸…é™¤èˆŠæ£‹å­
        document.querySelectorAll('.player-token').forEach(e => e.remove());
        
        players.forEach(p => {
            const posData = cellPositions[p.pos];
            const cellIndex = p.pos;
            // æ‰¾åˆ°å°æ‡‰çš„ cell DOM (ç°¡å–®èµ·è¦‹ï¼Œé‡æ–°è¨ˆç®— selector æˆ– append åˆ°å°æ‡‰ grid ä½ç½®)
            // é€™è£¡ç›´æ¥çµ•å°å®šä½åˆ° board ä¸Šæ¯”è¼ƒéº»ç…©ï¼Œä¸å¦‚ append åˆ° cell è£¡
            
            // æ‰¾åˆ°è©²ä½ç½®çš„ cell å…ƒç´  (å®ƒæ˜¯ç¬¬ index+2 å€‹ childï¼Œå› ç‚º image æ˜¯ç¬¬ä¸€å€‹)
            // ç‚ºäº†æº–ç¢ºï¼Œæˆ‘å€‘é‡æ–°éæ­·
            const board = document.getElementById('gameBoard');
            const cells = board.querySelectorAll('.cell');
            // cells é †åºæ˜¯æŒ‰ DOM ç”Ÿæˆé †åºï¼Œå‰›å¥½å°æ‡‰ index 0-19
            const targetCell = cells[cellIndex];
            
            const token = document.createElement('div');
            token.className = `player-token p${p.id}-token`;
            targetCell.appendChild(token);
        });
    }

    function log(msg) {
        const div = document.getElementById('log');
        div.innerHTML = `> ${msg}<br>` + div.innerHTML;
    }

    function showModal(title, msg) {
        document.getElementById('modalTitle').innerText = title;
        document.getElementById('modalMsg').innerText = msg;
        document.getElementById('messageModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('messageModal').style.display = 'none';
        checkWinCondition();
    }

    function playTurn() {
        const btn = document.getElementById('rollBtn');
        btn.disabled = true;
        
        const p = players[currentPlayerIdx];
        
        // æª¢æŸ¥åç‰¢
        if (p.jail > 0) {
            log(`${p.name} éˆæ„Ÿæ¯ç«­ï¼Œä¼‘æ¯ä¸­ (é‚„å‰© ${p.jail} å›åˆ)`);
            p.jail--;
            endTurn();
            return;
        }

        const roll = Math.floor(Math.random() * 6) + 1;
        document.getElementById('dice-display').innerText = `ğŸ² ${p.name} æ“²å‡ºäº† ${roll}`;
        
        // ç§»å‹•
        let oldPos = p.pos;
        p.pos = (p.pos + roll) % 20;
        
        // éèµ·é»çå‹µ
        if (p.pos < oldPos) {
            log(`${p.name} ç¶“éæ²³é™½è€å®¶ï¼Œç²å¾—ç›¤çº 200 éˆæ„Ÿ`);
            p.money += 200;
        }

        updateTokens();
        handleCell(p);
        updateUI();
    }

    function handleCell(p) {
        const cell = cellsData[p.pos];
        const idx = p.pos;

        if (cell.type === 'prop') {
            const owner = ownership[idx];
            if (owner === 0) {
                // ç„¡äººæ“æœ‰ï¼Œè³¼è²·ï¼Ÿ
                if (p.money >= cell.price) {
                    // ç°¡åŒ–ï¼šè‡ªå‹•è³¼è²·æˆ–å½ˆçª—ã€‚é€™è£¡ç”¨è‡ªå‹•è³¼è²·å¦‚æœéŒ¢å¤ å¤šï¼Œæˆ–æ˜¯50%æ©Ÿç‡è³¼è²·
                    // ç‚ºäº†äº’å‹•æ€§ï¼Œé€™è£¡å¼·åˆ¶è³¼è²·å¦‚æœè²·å¾—èµ·
                    if(confirm(`${p.name} åˆ°é” ${cell.name}ã€‚\nåƒ¹æ ¼: ${cell.price}\nä½ è¦è³¼è²·ä¸¦ç²å–éˆæ„Ÿä¾†æºå—ï¼Ÿ`)) {
                        p.money -= cell.price;
                        ownership[idx] = p.id;
                        document.getElementById(`owner-${idx}`).style.backgroundColor = p.color;
                        log(`${p.name} èŠ±è²» ${cell.price} è³¼è²·äº† ${cell.name}`);
                    }
                } else {
                    log(`${p.name} éˆæ„Ÿä¸è¶³ï¼Œç„¡æ³•è³¼è²· ${cell.name}`);
                }
            } else if (owner !== p.id) {
                // æ”¯ä»˜éè·¯è²»
                log(`${p.name} é€²å…¥å°æ‰‹åœ°ç›¤ ${cell.name}ï¼Œæ”¯ä»˜éè·¯è²» ${cell.rent}`);
                p.money -= cell.rent;
                players[owner-1].money += cell.rent;
            }
        } else if (cell.type === 'chance') {
            const luck = Math.random();
            if (luck > 0.5) {
                log(`${p.name} åœ¨ ${cell.name} ç²å¾—æ„å¤–éˆæ„Ÿï¼(+100)`);
                p.money += 100;
            } else {
                log(`${p.name} åœ¨ ${cell.name} æ¯«ç„¡æ”¶ç©«ã€‚`);
            }
        } else if (cell.type === 'event') {
             if (cell.name === "é–åº·ä¹‹é›£") {
                 log(`${p.name} é­é‡é–åº·ä¹‹é›£ï¼Œé€ƒå¾€å—æ–¹ï¼Œæå¤± 100 éˆæ„Ÿã€‚`);
                 p.money -= 100;
             } else if (cell.name === "æ¸¡æ±Ÿ") {
                 log("æ¸¡æ±Ÿè‡³æ­å·ï¼Œå®‰å…¨æŠµé”ã€‚");
             }
        } else if (cell.type === 'jail') {
            log(`${p.name} é€²å…¥æ¯æ€å´–ï¼Œæš«åœ 1 å›åˆã€‚`);
            p.jail = 1;
        } else if (cell.type === 'start') {
            // å·²åœ¨ç§»å‹•é‚è¼¯è™•ç†
        }
        
        setTimeout(endTurn, 500); // ç¨ä½œå»¶é²
    }

    function updateUI() {
        document.getElementById('p1-money').innerText = players[0].money;
        document.getElementById('p2-money').innerText = players[1].money;
        document.getElementById('p1-pos').innerText = cellsData[players[0].pos].name;
        document.getElementById('p2-pos').innerText = cellsData[players[1].pos].name;
    }

    function endTurn() {
        checkWinCondition();
        currentPlayerIdx = (currentPlayerIdx + 1) % 2;
        document.getElementById('rollBtn').innerText = `è¼ªåˆ° ${players[currentPlayerIdx].name} (æ“²éª°å­)`;
        document.getElementById('rollBtn').disabled = false;
        document.getElementById('rollBtn').style.backgroundColor = players[currentPlayerIdx].color;
    }

    function checkWinCondition() {
        if (players[0].money < 0) {
            alert("ç©å®¶ä¸€éˆæ„Ÿæ¯ç«­ï¼ç©å®¶äºŒç²å‹ï¼ä¸€ä»£å®—å¸«èª•ç”Ÿï¼");
            location.reload();
        } else if (players[1].money < 0) {
            alert("ç©å®¶äºŒéˆæ„Ÿæ¯ç«­ï¼ç©å®¶ä¸€ç²å‹ï¼ä¸€ä»£å®—å¸«èª•ç”Ÿï¼");
            location.reload();
        }
    }

    // å•Ÿå‹•
    initBoard();
</script>

</body>
</html>
    
  </body>
  
</html>
